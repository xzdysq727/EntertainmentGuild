@using EntertainmentGuild.Models.Admin
@model Product

@{
    ViewData["Title"] = "Product Details";
    Layout = "~/Views/Shared/_CustomerLayout.cshtml";
}

<div class="container mt-5 mb-5">
    <div class="row">
        <div class="col-md-6 mb-4 d-flex justify-content-center align-items-center">
            <img src="@(Model.ImageData != null
                         ? $"data:image/png;base64,{Convert.ToBase64String(Model.ImageData)}"
                         : "/images/placeholder.png")"
                 class="img-fluid rounded-3 shadow-sm border"
                 style="max-height: 600px; max-width: 100%; object-fit: contain; background-color: #f9f7f2;"
                 alt="Product Image" />
        </div>



        <div class="col-md-6">
            <h2 class="mb-3 fw-bold">@Model.Name</h2>
            <p class="text-muted mb-1">
                <i class="bi bi-tag-fill text-secondary me-1"></i>Category:
                <strong>@Model.Category</strong>
            </p>
            <p class="text-muted mb-3">
                <i class="bi bi-bookmark-fill text-secondary me-1"></i>Subcategory:
                <strong>@Model.SubCategory</strong>
            </p>
            <h4 class="text-primary fw-bold mb-3">$@Model.Price.ToString("F2")</h4>


            <p class="text-muted mb-4">
                <i class="bi bi-box-seam me-1"></i>
                Remaining:
                <strong>
                    @if (Model.Quantity == 0)
                    {
                        <span class="text-danger">Out of Stock</span>
                    }
                    else if (Model.Quantity < 5)
                    {
                        <span class="text-warning">@($"{Model.Quantity} left - hurry!")</span>
                    }
                    else
                    {
                        <span class="text-success">@($"{Model.Quantity} in stock")</span>
                    }
                </strong>
            </p>


            @if (TempData["CartMessage"] != null)
            {
                <div class="alert alert-success">@TempData["CartMessage"]</div>
            }


            @if (Model.Quantity > 0)
            {
                <form asp-action="AddToCart" method="post" class="d-flex align-items-center mb-4">
                    <input type="hidden" name="productId" value="@Model.Id" />

                    <select name="quantity" class="form-select me-2 rounded-pill" style="width: 100px;">
                        @for (int i = 1; i <= Math.Min(Model.Quantity, 10); i++)
                        {
                            <option value="@i">@i</option>
                        }
                    </select>

                    <button type="submit" class="btn text-white rounded-pill px-4"
                            style="background-color: #b29b4b;">
                        <i class="bi bi-cart-plus me-1"></i> Add to Cart
                    </button>
                </form>
            }
            else
            {
                <button class="btn btn-secondary mt-3 rounded-pill" disabled>
                    Out of Stock
                </button>
            }

            <hr />
            <h5 class="fw-bold mb-2">Description</h5>
            <p class="text-muted">@Model.Description</p>

            <a asp-action="Product" class="btn btn-outline-secondary mt-3 rounded-pill">
                <i class="bi bi-arrow-left me-1"></i>Back to Products
            </a>
        </div>
    </div>
</div>
<footer class="mt-5 pt-4 pb-3 bg-light text-dark border-top shadow-sm">
    <div class="container">
        <div class="row">
            <div class="col-md-4 mb-3">
                <h5 class="fw-bold" style="color:#b29b4b;">e-Closet</h5>
                <p class="text-muted small">
                    Your curated fashion corner.
                    Blending style & soul with a touch of music.
                </p>
            </div>

            <div class="col-md-4 mb-3">
                <h6 class="fw-bold">Quick Links</h6>
                <ul class="list-unstyled small">
                    <li><a href="/Customer/Index" class="text-decoration-none text-dark">Home</a></li>
                    <li><a href="/Customer/Product" class="text-decoration-none text-dark">Products</a></li>
                    <li><a href="/Customer/Cart" class="text-decoration-none text-dark">Cart</a></li>
                    <li><a href="/Customer/Account" class="text-decoration-none text-dark">My Account</a></li>
                </ul>
            </div>

            <div class="col-md-4 mb-3">
                <h6 class="fw-bold">Contact</h6>
                <p class="small mb-1"><i class="bi bi-envelope me-1"></i> support@ecloset.com</p>
                <p class="small">
                    <i class="bi bi-music-note-beamed me-1"></i> Follow us on
                    <a href="#" class="text-decoration-none text-dark">Instagram</a>
                </p>
            </div>
        </div>

        <div class="text-center mt-4 border-top pt-3 small text-muted">
            © @DateTime.Now.Year e-Closet. All rights reserved.
        </div>
    </div>
</footer>